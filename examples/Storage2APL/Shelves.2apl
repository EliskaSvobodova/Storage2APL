include: person.2apl;

beliefs:
	shelves([]).
	

beliefupdates:
	{ shelves(LIST) } AddFree(X, Y) {shelves([[free, X, Y] | LIST])}


pcrules:
	event(wallAt(X, Y), blockworld) <- true |
	{
		AddFree(X, Y);
	}
	
	message(im, request, La, On, _) <- true |
	{
		shelves(L);
		assign(L);
	}
	
	assign(L) <- true |
	{
		if (L = [[free, X, Y] | REST]) then
			send(im, inform, shelf(X, Y));
		else
			assign(REST);
	}